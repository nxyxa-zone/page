<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LKPD & Portofolio - PJOK Fase E</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Klasik: Playfair Display (Judul) & Cormorant Garamond (Isi) -->
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=Playfair+Display:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <style>
        :root {
            --paper-color: #fdfbf7;
            --ink-color: #2c1810;
            --accent-color: #8b4513;
        }
        body { 
            font-family: 'Cormorant Garamond', serif; 
            background-color: #eaddcf; 
            color: var(--ink-color);
        }
        h1, h2, h3, h4, .font-heading {
            font-family: 'Playfair Display', serif;
        }
        .paper-sheet {
            background-color: var(--paper-color);
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23dccfc1' fill-opacity='0.2' fill-rule='evenodd'/%3E%3C/svg%3E");
            box-shadow: 0 10px 30px rgba(0,0,0,0.15), 0 0 0 1px rgba(139, 69, 19, 0.1);
        }
        .classic-border {
            border: 3px double var(--ink-color);
        }
        .section-title {
            position: relative;
            display: inline-block;
            margin-bottom: 1rem;
            padding-bottom: 0.25rem;
            border-bottom: 2px solid var(--accent-color);
        }
        .signature-pad {
            border: 2px dashed #a1887f;
            background-color: rgba(255,255,255,0.5);
            touch-action: none;
        }
        /* Custom Checkbox */
        input[type="checkbox"] {
            accent-color: var(--ink-color);
            width: 1.2rem;
            height: 1.2rem;
            cursor: pointer;
        }
        /* Form Inputs */
        input[type="text"], input[type="date"], textarea, select {
            background: transparent !important;
            border: none !important;
            border-bottom: 1px dashed var(--ink-color) !important;
            font-family: 'Cormorant Garamond', serif;
            color: var(--ink-color);
            border-radius: 0 !important;
        }
        input[type="text"]:focus, input[type="date"]:focus, textarea:focus, select:focus {
            outline: none;
            border-bottom: 2px solid var(--accent-color) !important;
            background-color: rgba(255,255,200,0.2) !important;
        }

        @media print {
            .no-print { display: none !important; }
            body { background: white; padding: 0; }
            .paper-sheet { 
                box-shadow: none; 
                margin: 0; 
                width: 100%;
                max-width: 100%;
                border: none;
                background-image: none; /* Hemat tinta */
            }
            input::placeholder, textarea::placeholder { color: transparent; }
            * { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
        }
    </style>
</head>
<body class="py-8 px-4 min-h-screen">

    <!-- LOGIN & ADMIN PANEL (Fixed Top) -->
    <div class="fixed top-4 right-4 z-50 no-print flex flex-col items-end gap-2">
        
        <!-- Tombol Login -->
        <button id="btnLogin" onclick="showLoginModal()" class="bg-[#3e2723] text-[#fdfbf7] px-4 py-2 rounded-full shadow-lg font-heading tracking-wide hover:bg-[#5d4037] transition-all border-2 border-[#8b4513] flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" /></svg>
            Akses Guru
        </button>

        <!-- Admin Dashboard (Hidden by default) -->
        <div id="adminPanel" class="hidden bg-[#3e2723] text-[#fdfbf7] p-4 rounded-xl shadow-2xl w-72 border-2 border-[#8b4513] mt-2">
            <div class="flex justify-between items-center mb-3 border-b border-[#8b4513] pb-2">
                <h3 class="font-heading font-bold text-lg text-[#d7ccc8]">Dashboard Guru</h3>
                <button onclick="logout()" class="text-xs text-red-300 hover:text-red-100">Keluar</button>
            </div>
            <div class="space-y-3">
                <label class="text-xs uppercase tracking-widest text-[#a1887f]">Pilih Modul Ajar:</label>
                <select id="meetingSelector" onchange="loadMeetingData()" class="w-full bg-[#5d4037] !border-none text-[#fdfbf7] p-2 rounded text-lg font-bold cursor-pointer hover:bg-[#6d4c41]">
                    <option value="1">Pertemuan 1 (Dasar)</option>
                    <option value="2">Pertemuan 2 (Teknik)</option>
                    <option value="3">Pertemuan 3 (Game)</option>
                </select>
                <p class="text-[10px] text-[#a1887f] italic text-center mt-2">Hanya guru yang dapat melihat panel ini.</p>
            </div>
        </div>
    </div>

    <!-- PIN MODAL -->
    <div id="pinModal" class="fixed inset-0 bg-black/80 z-[60] hidden flex items-center justify-center backdrop-blur-sm no-print">
        <div class="bg-[#fdfbf7] p-8 rounded-lg shadow-2xl max-w-sm w-full text-center border-4 double border-[#3e2723]">
            <h3 class="font-heading text-2xl font-bold mb-4 text-[#3e2723]">Verifikasi Guru</h3>
            <p class="mb-4 text-[#5d4037] italic">Masukkan PIN keamanan untuk mengubah materi.</p>
            <input type="password" id="pinInput" class="w-full text-center text-2xl tracking-[0.5em] font-bold p-2 mb-6 !border-b-2 !border-[#3e2723]" maxlength="6" placeholder="******">
            <div class="flex gap-2 justify-center">
                <button onclick="closeLoginModal()" class="px-4 py-2 text-[#5d4037] hover:bg-gray-200 rounded">Batal</button>
                <button onclick="checkPin()" class="px-6 py-2 bg-[#3e2723] text-[#fdfbf7] font-bold rounded hover:bg-[#5d4037]">Masuk</button>
            </div>
        </div>
    </div>

    <!-- MAIN PAPER SHEET -->
    <div class="max-w-4xl mx-auto container paper-sheet min-h-[1123px] relative p-10 md:p-16">
        
        <!-- Border Hiasan -->
        <div class="absolute top-4 left-4 right-4 bottom-4 classic-border pointer-events-none"></div>
        <div class="absolute top-5 left-5 right-5 bottom-5 border border-[#3e2723] pointer-events-none opacity-50"></div>

        <!-- Header -->
        <header class="text-center mb-10 relative z-10 border-b-2 border-[#3e2723] pb-6">
            <h1 class="text-3xl md:text-4xl font-heading font-black mb-2 tracking-wide uppercase leading-tight">LEMBAR KERJA PESERTA DIDIK (LKPD) <br>& PORTOFOLIO PJOK</h1>
            <p class="text-lg md:text-xl font-heading italic text-[#5d4037] mt-2">Materi: Bulu Tangkis (Fase E - Kelas X)</p>
        </header>

        <!-- Identity Section -->
        <section class="mb-10 relative z-10">
            <div class="flex flex-col md:flex-row justify-between items-start gap-8">
                <!-- Grid untuk Identitas yang Sejajar -->
                <div class="w-full md:w-2/3 grid grid-cols-[100px_10px_auto] gap-y-3 items-center">
                    
                    <label class="font-heading font-bold text-lg">Nama</label>
                    <span class="font-bold text-center">:</span>
                    <input type="text" class="w-full text-xl px-2 bg-transparent" placeholder="Tulis nama lengkap...">
                    
                    <label class="font-heading font-bold text-lg">Kelas</label>
                    <span class="font-bold text-center">:</span>
                    <input type="text" class="w-full text-xl px-2 bg-transparent" placeholder="Contoh: X - 1">

                    <label class="font-heading font-bold text-lg">Tanggal</label>
                    <span class="font-bold text-center">:</span>
                    <input type="date" id="studentDate" class="w-full text-lg px-2 bg-transparent uppercase">
                </div>

                <div class="w-full md:w-1/3 text-right">
                    <div class="inline-block border-2 border-[#3e2723] p-3 transform rotate-1 bg-white/50 shadow-sm text-center min-w-[180px]">
                        <p class="text-[10px] font-bold uppercase tracking-widest text-[#8b4513] mb-1">Topik Pembelajaran</p>
                        <p id="display-meeting-title" class="font-heading text-lg font-bold text-[#3e2723]">Pertemuan 1</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Content Area -->
        <div class="space-y-10 relative z-10">

            <!-- I. Materi -->
            <section>
                <h3 class="font-heading text-2xl font-bold text-[#3e2723] section-title">I. Ringkasan Materi</h3>
                <div id="content-materi" class="text-lg leading-relaxed text-justify space-y-4">
                    <!-- Injected JS -->
                </div>
            </section>

            <!-- II. Aktivitas -->
            <section>
                <h3 class="font-heading text-2xl font-bold text-[#3e2723] section-title">II. Panduan Praktik</h3>
                <p class="italic mb-4 text-[#5d4037]">Instruksi lapangan (lakukan secara berpasangan/kelompok):</p>
                <div id="content-aktivitas" class="grid grid-cols-1 gap-4">
                    <!-- Injected JS -->
                </div>
            </section>

            <!-- III. Refleksi -->
            <section>
                <h3 class="font-heading text-2xl font-bold text-[#3e2723] section-title">III. Refleksi & Analisis</h3>
                <div id="content-soal" class="space-y-6">
                    <!-- Injected JS -->
                </div>
            </section>

            <!-- IV. Rubrik -->
            <section>
                <h3 class="font-heading text-2xl font-bold text-[#3e2723] section-title">IV. Penilaian Karakter</h3>
                <div class="border-2 border-[#3e2723]">
                    <table class="w-full text-left">
                        <thead class="bg-[#3e2723] text-[#fdfbf7]">
                            <tr>
                                <th class="p-3 font-heading tracking-wide border-r border-[#fdfbf7]">Indikator Profil Pelajar Pancasila</th>
                                <th class="p-3 w-16 text-center border-r border-[#fdfbf7]">Ya</th>
                                <th class="p-3 w-16 text-center">Tidak</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-[#3e2723] text-lg">
                            <tr>
                                <td class="p-3 border-r border-[#3e2723]"><strong>Mandiri:</strong> Menyiapkan alat sendiri & serius saat pemanasan.</td>
                                <td class="p-3 text-center border-r border-[#3e2723]"><input type="checkbox"></td>
                                <td class="p-3 text-center"><input type="checkbox"></td>
                            </tr>
                            <tr>
                                <td class="p-3 border-r border-[#3e2723]"><strong>Gotong Royong:</strong> Membantu teman & merapikan lapangan.</td>
                                <td class="p-3 text-center border-r border-[#3e2723]"><input type="checkbox"></td>
                                <td class="p-3 text-center"><input type="checkbox"></td>
                            </tr>
                             <tr>
                                <td class="p-3 border-r border-[#3e2723]"><strong>Bernalar Kritis:</strong> Mampu menganalisis kesalahan gerak.</td>
                                <td class="p-3 text-center border-r border-[#3e2723]"><input type="checkbox"></td>
                                <td class="p-3 text-center"><input type="checkbox"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- V. Hasil & TTD -->
            <section class="mt-12 pt-8 border-t-2 border-double border-[#3e2723]">
                <div class="flex flex-col md:flex-row gap-8">
                    
                    <!-- Penilaian Guru -->
                    <div class="flex-1 bg-[#3e2723]/5 p-6 rounded border border-[#3e2723]">
                        <h4 class="font-heading font-bold text-xl mb-4 border-b border-[#3e2723] pb-2">Evaluasi Instruktur</h4>
                        
                        <div class="mb-6">
                            <label class="block font-bold mb-2 uppercase tracking-wider text-sm">Predikat & Nilai Angka:</label>
                            <select class="w-full text-xl font-bold bg-transparent !border-b-2 !border-[#3e2723] py-2">
                                <option value="">-- Berikan Nilai --</option>
                                <option value="A">A (Sangat Baik) | 91 - 100</option>
                                <option value="B">B (Baik) | 81 - 90</option>
                                <option value="C">C (Cukup) | 71 - 80</option>
                                <option value="D">D (Kurang) | < 70</option>
                            </select>
                        </div>

                        <div>
                            <label class="block font-bold mb-2 uppercase tracking-wider text-sm">Catatan Khusus:</label>
                            <textarea class="w-full h-24 text-lg italic" placeholder="Tuliskan umpan balik untuk siswa..."></textarea>
                        </div>
                    </div>

                    <!-- Tanda Tangan -->
                    <div class="flex gap-8 justify-center md:justify-end items-end">
                        <div class="text-center w-40 flex flex-col justify-end">
                            <canvas id="sig-siswa" class="signature-pad w-full h-24 mb-2"></canvas>
                            <div class="border-t border-[#3e2723] pt-1">
                                <p class="text-sm font-bold uppercase">Siswa</p>
                            </div>
                            <button onclick="clearSig('sig-siswa')" class="no-print text-xs text-red-800 hover:underline mt-1">Hapus</button>
                        </div>
                        <div class="text-center w-48 flex flex-col justify-end">
                            <canvas id="sig-guru" class="signature-pad w-full h-24 mb-2"></canvas>
                            <div class="border-t border-[#3e2723] pt-1">
                                <p class="text-sm font-bold uppercase">Guru Pengampu</p>
                                <span class="text-xs block font-bold">M. Nanda S.N., S.Kom.</span>
                            </div>
                            <button onclick="clearSig('sig-guru')" class="no-print text-xs text-red-800 hover:underline mt-1">Hapus</button>
                        </div>
                    </div>
                </div>
            </section>

        </div>

        <!-- Print Button -->
        <div class="mt-12 text-center no-print relative z-10">
            <button onclick="window.print()" class="bg-[#3e2723] text-[#fdfbf7] font-heading font-bold py-4 px-8 text-xl shadow-xl hover:bg-[#5d4037] transition-transform transform hover:-translate-y-1 active:translate-y-0 rounded-sm border-2 border-[#8b4513]">
                üñ®Ô∏è Cetak Dokumen (PDF)
            </button>
        </div>

    </div>

    <script>
        // === LOGIKA KEAMANAN GURU ===
        const TEACHER_PIN = "270302";

        function showLoginModal() {
            document.getElementById('pinModal').classList.remove('hidden');
            document.getElementById('pinInput').focus();
        }

        function closeLoginModal() {
            document.getElementById('pinModal').classList.add('hidden');
            document.getElementById('pinInput').value = '';
        }

        function checkPin() {
            const input = document.getElementById('pinInput').value;
            if (input === TEACHER_PIN) {
                // Sukses
                closeLoginModal();
                document.getElementById('btnLogin').classList.add('hidden'); // Sembunyikan tombol login
                document.getElementById('adminPanel').classList.remove('hidden'); // Tampilkan dashboard
                alert("Login Berhasil! Silakan pilih modul pertemuan.");
            } else {
                alert("PIN Salah! Akses ditolak.");
                document.getElementById('pinInput').value = '';
            }
        }

        function logout() {
            document.getElementById('adminPanel').classList.add('hidden');
            document.getElementById('btnLogin').classList.remove('hidden');
            location.reload(); // Refresh halaman ke default
        }

        // Support Enter key di PIN
        document.getElementById('pinInput').addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
                checkPin();
            }
        });


        // === DATA RPP ===
        const rppData = {
            1: {
                title: "Pertemuan 1: Dasar & Sejarah",
                materi: `
                    <p><strong>1. Sejarah Singkat:</strong> Permainan bulu tangkis modern dikembangkan di Inggris, namun akarnya berasal dari permainan 'Poona' di India. Organisasi induk dunia adalah BWF, dan di Indonesia adalah PBSI (1951).</p>
                    <p><strong>2. Teknik Grip (Pegangan):</strong> 
                        <br><em>a. Forehand:</em> Memegang raket miring seperti berjabat tangan (Huruf V).
                        <br><em>b. Backhand:</em> Ibu jari menekan pada permukaan lebar gagang raket untuk tenaga dorong.
                    </p>
                    <p><strong>3. Stance (Sikap Berdiri):</strong> Kaki dibuka selebar bahu, lutut ditekuk, titik berat badan di tengah.</p>`,
                aktivitas: [
                    { t: "Shadow Badminton", d: "Gerakan kaki dan ayunan raket tanpa bola (6 titik lapangan)." },
                    { t: "Grip Switching", d: "Latihan memutar raket dari forehand ke backhand dengan cepat." },
                    { t: "Servis Pendek", d: "Servis menyilang (cross court) melewati garis servis lawan." }
                ],
                soal: [
                    "Jelaskan perbedaan posisi ibu jari pada grip Forehand vs Backhand!",
                    "Mengapa lutut harus ditekuk saat posisi siap (stance)?"
                ]
            },
            2: {
                title: "Pertemuan 2: Teknik Pukulan",
                materi: `
                    <p><strong>1. Lob (Clear):</strong> Pukulan tinggi ke arah garis belakang lawan. Digunakan untuk bertahan atau mengatur napas.</p>
                    <p><strong>2. Drop Shot:</strong> Pukulan tipuan (gerakan seperti smash) namun bola dipukul halus agar jatuh tepat di dekat net lawan.</p>
                    <p><strong>3. Netting:</strong> Permainan halus di depan net. Kunci utamanya adalah 'rasa' (feeling) agar bola bergulir tipis di bibir net.</p>`,
                aktivitas: [
                    { t: "Drill Lob", d: "Saling memukul bola lambung tinggi ke garis belakang (baseline)." },
                    { t: "Target Drop Shot", d: "Menjatuhkan bola ke dalam keranjang di sudut depan net." },
                    { t: "Net Play", d: "Permainan 1 lawan 1 khusus area depan net (tidak boleh smash)." }
                ],
                soal: [
                    "Apa perbedaan tenaga yang dipakai saat Smash dibandingkan Drop Shot?",
                    "Jelaskan strategi menggunakan Lob saat kamu terdesak!"
                ]
            },
            3: {
                title: "Pertemuan 3: Game & Taktik",
                materi: `
                    <p><strong>1. Smash:</strong> Pukulan menyerang terkuat. Menukik tajam ke bawah dengan kekuatan penuh dari posisi overhead.</p>
                    <p><strong>2. Peraturan Skor:</strong> Menggunakan sistem <em>Rally Point</em> 2 x 21. Jika 20-20, terjadi Deuce (selisih 2 poin).</p>
                    <p><strong>3. Fault (Pelanggaran):</strong> Raket menyentuh net, kok tersangkut di net, menginjak garis saat servis.</p>`,
                aktivitas: [
                    { t: "Smash & Defense", d: "Satu menyerang (smash), satu bertahan (mengembalikan bola)." },
                    { t: "Game Simulasi", d: "Bermain dengan skor 11 poin, menerapkan aturan in/out." },
                    { t: "Perwasitan", d: "Siswa menjadi wasit utama dan hakim garis." }
                ],
                soal: [
                    "Sebutkan 3 jenis kesalahan (fault) yang memberi poin ke lawan!",
                    "Bagaimana sikap sportif saat menerima keputusan wasit yang merugikan?"
                ]
            }
        };

        function loadMeetingData() {
            const id = document.getElementById('meetingSelector').value;
            const data = rppData[id];

            document.getElementById('display-meeting-title').innerText = data.title;
            document.getElementById('content-materi').innerHTML = data.materi;

            const actContainer = document.getElementById('content-aktivitas');
            actContainer.innerHTML = '';
            data.aktivitas.forEach((act, idx) => {
                actContainer.innerHTML += `
                    <div class="flex gap-4 items-start border-l-4 border-[#8b4513] pl-4 py-2 bg-[#8b4513]/5">
                        <span class="font-heading font-bold text-xl text-[#8b4513]">0${idx+1}.</span>
                        <div>
                            <h4 class="font-bold text-lg leading-none mb-1">${act.t}</h4>
                            <p class="text-sm">${act.d}</p>
                        </div>
                    </div>`;
            });

            const soalContainer = document.getElementById('content-soal');
            soalContainer.innerHTML = '';
            data.soal.forEach((q, idx) => {
                soalContainer.innerHTML += `
                    <div class="relative">
                        <p class="font-bold mb-2 text-lg">${idx+1}. ${q}</p>
                        <textarea class="w-full h-24 text-lg italic bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjI1cHgiPjxsaW5lIHgxPSIwIiB5MT0iMjUiIHgyPSIxMDAlIiB5Mj0iMjUiIHN0eWxlPSJzdHJva2U6IzNjMjcyMzdzdHJva2Utd2lkdGg6MXB4O3N0cm9rZS1kYXNoYXJyYXk6MiAyIiAvPjwvc3ZnPg==')] bg-local" style="line-height: 25px;" placeholder="Jawab di sini..."></textarea>
                    </div>`;
            });
        }

        // TANGGAL (MANUAL PILIH) & CANVAS
        
        // Set default date to today, but user can change it
        document.getElementById('studentDate').valueAsDate = new Date();

        function setupSig(id) {
            const canvas = document.getElementById(id);
            const ctx = canvas.getContext('2d');
            let drawing = false;

            function resize() {
                const ratio = Math.max(window.devicePixelRatio || 1, 1);
                canvas.width = canvas.offsetWidth * ratio;
                canvas.height = canvas.offsetHeight * ratio;
                ctx.scale(ratio, ratio);
            }
            window.addEventListener("resize", resize);
            resize();

            const getPos = (e) => {
                const rect = canvas.getBoundingClientRect();
                return { x: (e.clientX || (e.touches ? e.touches[0].clientX : 0)) - rect.left, y: (e.clientY || (e.touches ? e.touches[0].clientY : 0)) - rect.top };
            };
            const start = (e) => { drawing = true; ctx.beginPath(); const p = getPos(e); ctx.moveTo(p.x, p.y); if(e.cancelable) e.preventDefault(); };
            const move = (e) => { if(!drawing) return; const p = getPos(e); ctx.lineWidth = 2; ctx.lineCap = 'round'; ctx.strokeStyle = '#2c1810'; ctx.lineTo(p.x, p.y); ctx.stroke(); if(e.cancelable) e.preventDefault(); };
            const end = () => drawing = false;

            canvas.addEventListener('mousedown', start); canvas.addEventListener('mousemove', move); window.addEventListener('mouseup', end);
            canvas.addEventListener('touchstart', start, {passive:false}); canvas.addEventListener('touchmove', move, {passive:false}); canvas.addEventListener('touchend', end);
        }
        function clearSig(id) { const c = document.getElementById(id); const x = c.getContext('2d'); x.clearRect(0,0,c.width,c.height); }

        setupSig('sig-siswa');
        setupSig('sig-guru');
        loadMeetingData(); // Load default
    </script>
</body>
</html>


